<!DOCTYPE html>
<html lang="en">

<%- include('head.ejs', { title: 'Review Deck' , stylesheet: '/css/edit-deck.css' }) %>

  <body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>

    <%- include('navbar.ejs',{user: user}) %>

      <div id="edit-page">
        <h1 class="text-center">
          <%=deck.name%>
        </h1>

        <!-- Main Menu -->
        <div id="create-flashcard-container" class="text-center">
          <button id="create-btn" class="btn btn-secondary" data-bs-toggle="modal"
            data-bs-target="#newFlashcardModal">New Flashcard</button>
        </div>

        <!-- Get Todo List -->
        <div id="getFlashcardList" class="section">
          <div class="row justify-content-center align-items-center">
            <div class="col-md-6"> <!-- Adjust the column width based on your preference -->
              <% if (flashcards.length===0) { %>
                <p>No flashcards available.</p>
                <% } else { %>
                  <% flashcards.forEach(function(flashcard) { %>
                    <div class="card my-2 flashcard my-5" id="flashcard-<%= flashcard.id %>">
                      <div class="card-body row">
                        <div class="col-10" id="flashcard-container-
                        <%= flashcard.id %>">
                          <div class="flashcard-side flashcard-front">
                            <p>
                              <%= flashcard.front %>
                            </p>
                            <% if(flashcard.front_img){ %>
                              <img src="/uploads/<%= flashcard.front_img %>" alt="front image">
                              <% } %>
                          </div>

                          <div class="flashcard-side flashcard-back" style="display: none;">
                            <p>
                              <%= flashcard.back %>
                            </p>
                            <% if(flashcard.back_img){ %>
                              <img src="/uploads/<%= flashcard.back_img %>" alt="back image">
                              <% } %>
                          </div>
                        </div>
                        <div class="col-2 text-right aligns-items-center">
                          <button class="btn btn-info flip-button">Flip</button>
                          <button class="btn btn-danger edit-button" data-flashcard-id="<%= flashcard.id %>"
                            data-bs-toggle="modal" data-bs-target="#editFlashcardModal">Edit</button>
                          <button class="btn btn-primary delete-button" data-flashcard-id="<%= flashcard.id %>"
                            data-bs-toggle="modal" data-bs-target="#flashcardDeleteModal">Delete</button>
                        </div>
                      </div>
                    </div>
                    <% }); %>
                      <% } %>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="newFlashcardModal" tabindex="-1" aria-labelledby="newFlashcardModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="newFlashcardModal">Add Flashcard</h5>
            </div>
            <form id="create-flashcard-form">
              <div class="modal-body" id="newFlashcardModalBody">
                <input type="hidden" name="deck_id" value="<%=deck.id%>">
                <div class="mb-3">
                  <label for="front" class="form-label">Front</label>
                  <input type="text" class="form-control" id="create-front" name="front">
                </div>
                <div class="mb-3">
                  <label for="back" class="form-label">Back</label>
                  <input type="text" class="form-control" id="create-back" name="back">
                </div>
                <div class="mb-3">
                  <label for="front_img" class="form-label">Front Image</label>
                  <input type="file" class="form-control" id="create-front_img" name="front_img">
                  <button type="button" class="btn btn-danger mt-2" id="create-removeFrontImg" >Remove </button>
                </div>
                <div class="mb-3">
                  <label for="back_img" class="form-label">Back Image</label>
                  <input type="file" class="form-control" id="create-back_img" name="back_img">
                  <button type="button" class="btn btn-danger mt-2" id="create-removeBackImg">Remove </button>
                </div>

              </div>
              <div class="modal-footer" id="newFlashcardModalFooter">
                <button type="submit" class="btn btn-success" id="confirmCreate">Add</button>
                <button type="reset" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>

              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="modal fade" id="editFlashcardModal" tabindex="-1" aria-labelledby="editFlashcardModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="editFlashcardModal">Edit Flashcard</h5>
            </div>
            <form id="edit-flashcard-form">
              <div class="modal-body" id="editFlashcardModalBody">

                <div class="mb-3">
                  <label for="front" class="form-label">Front</label>
                  <input type="text" class="form-control" id="front" name="front">
                </div>
                <div class="mb-3">
                  <label for="back" class="form-label">Back</label>
                  <input type="text" class="form-control" id="back" name="back">
                </div>
                <div class="mb-3">
                  <label for="front_img" class="form-label">Front Image</label>
                  <input type="file" class="form-control" id="front_img" name="front_img">
                  <button type="button" class="btn btn-danger mt-2" id="edit-removeFrontImg">Remove</button>
                </div>
                <div class="mb-3">
                  <label for="back_img" class="form-label">Back Image</label>
                  <input type="file" class="form-control" id="back_img" name="back_img">
                  <button type="button" class="btn btn-danger mt-2" id="edit-removeBackImg">Remove </button>
                </div>

              </div>
              <div class="modal-footer" id="editFlashcardModalFooter">
                <button type="submit" class="btn btn-success" id="confirmEdit" type="submit">Edit</button>
                <button type="reset" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>

              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="modal fade" id="flashcardDeleteModal" tabindex="-1" aria-labelledby="flashcardDeleteModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="flashcardDeleteModalLabel">Delete Flashcard</h5>
              <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
            </div>
            <div class="modal-body" id="flashcardDeleteModalBody">
              Are you sure you want to delete the flashcard?
            </div>
            <div class="modal-footer" id="flashcardDeleteModalFooter">
              <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
            </div>
          </div>
        </div>
      </div>
      ,
      <script src=" https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js "></script>
     
      <script src="/js/edit-deck.js">

      </script>

  </body>

</html>